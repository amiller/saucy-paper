\begin{bbox}[title={$\mathcal{F}_\msf{Atomic}$}]

Initialize: $\msf{BC} \leftarrow \emptyset$

\OnInput \inmsg{tx} from $P_i$:

    \quad \Leak (\msf{tx}, \Partyi) and \Eventually:
    
        \qquad Append \msf{tx} to \msf{BC}, $\msf{pos} \leftarrow |\msf{BC}|$
        
        \qquad For each $P_j$:
            
            \qqquad \Leak (\msf{pos}, $P_j$) and \Eventually: 

			\qqqquad send $\msf{BC}[1:\msf{pos}]$ to $P_j$
    
        
\end{bbox}
